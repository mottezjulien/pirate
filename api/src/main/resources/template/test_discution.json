{
  "code": "TEST_DISCUSSION",
  "version": "1.0",
  "label": "Test de discussion",
  "duration": 10,
  "talk": {
    "characters": [
      {
        "ref": "BOB",
        "images": [
          {
            "ref": "default",
            "value": {
              "type": "ASSET",
              "value": "/pouet/bobdefault.jpg"
            }
          }
        ]
      }
    ],
    "items": [
      {
        "ref": "TALK_LETS_GO",
        "value": {
          "FR": "Tu veux jouer ?",
          "EN": "Do you want to play?"
        },
        "options": [
          {
            "ref": "TALK_LETS_GO_CHOIX_OUI",
            "value": {
              "FR": "Oui",
              "EN": "Yes"
            },
            "next": "TALK002"
          },
          {
            "ref": "TALK_LETS_GO_CHOIX_NON",
            "value": {
              "FR": "Non",
              "EN": "No"
            },
            "next": "TALK003"
          },
          {
            "ref": "TALK_LETS_GO_CHOIX_MAYBE",
            "value": {
              "FR": "Peut être",
              "EN": "May be"
            },
            "next": "TALK004"
          }
        ],
        "character": {
          "character": "BOB",
          "image": "default"
        }
      },
      {
        "ref": "TALK002",
        "value": {
          "FR": "Excellent, continuons !",
          "EN": "Great, let's continue!"
        },
        "character": {
          "character": "BOB",
          "image": "default"
        }
      },
      {
        "ref": "TALK003",
        "value": {
          "FR": "Dommage, fin de test.",
          "EN": "Too bad, end of test."
        },
        "character": {
          "character": "BOB",
          "image": "default"
        }
      },
      {
        "ref": "TALK004",
        "value": {
          "FR": "Alors, on hésite ?",
          "EN": "Alors, on hésite ? EN"
        },
        "next": "TALK005",
        "character": {
          "character": "BOB",
          "image": "default"
        }
      },
      {
        "ref": "TALK005",
        "value": {
          "FR": "fin de la discution.",
          "EN": "fin de la discution. EN"
        },
        "next": "TALK_INPUT_ALPHA",
        "character": {
          "character": "BOB",
          "image": "default"
        }
      },
      {
        "ref": "TALK_INPUT_ALPHA",
        "value": {
          "FR": "Quel est le mot de passe secret ?",
          "EN": "What is the secret password?"
        },
        "character": {
          "character": "BOB",
          "image": "default"
        },
        "inputText": {
          "type": "ALPHANUMERIC"
        }
      },
      {
        "ref": "TALK_INPUT_ALPHA_SUCCESS",
        "value": {
          "FR": "Bravo ! Le mot de passe est correct.",
          "EN": "Well done! The password is correct."
        },
        "next": "TALK_INPUT_NUMERIC",
        "character": {
          "character": "BOB",
          "image": "default"
        }
      },
      {
        "ref": "TALK_INPUT_ALPHA_FAIL",
        "value": {
          "FR": "Non, ce n'est pas le bon mot de passe.",
          "EN": "No, that's not the right password."
        },
        "options": [
          {
            "ref": "TALK_INPUT_ALPHA_RETRY",
            "value": { "FR": "Réessayer", "EN": "Try again" },
            "next": "TALK_INPUT_ALPHA"
          },
          {
            "ref": "TALK_INPUT_ALPHA_SKIP",
            "value": { "FR": "Passer", "EN": "Skip" },
            "next": "TALK_INPUT_NUMERIC"
          }
        ],
        "character": {
          "character": "BOB",
          "image": "default"
        }
      },
      {
        "ref": "TALK_INPUT_NUMERIC",
        "value": {
          "FR": "Entrez le code à 4 chiffres :",
          "EN": "Enter the 4-digit code:"
        },
        "character": {
          "character": "BOB",
          "image": "default"
        },
        "inputText": {
          "type": "NUMERIC",
          "size": 4
        }
      },
      {
        "ref": "TALK_INPUT_NUMERIC_SUCCESS",
        "value": {
          "FR": "Code correct ! Fin du test.",
          "EN": "Correct code! End of test."
        },
        "character": {
          "character": "BOB",
          "image": "default"
        }
      },
      {
        "ref": "TALK_INPUT_NUMERIC_FAIL",
        "value": {
          "FR": "Code incorrect.",
          "EN": "Wrong code."
        },
        "options": [
          {
            "ref": "TALK_INPUT_NUMERIC_RETRY",
            "value": { "FR": "Réessayer", "EN": "Try again" },
            "next": "TALK_INPUT_NUMERIC"
          },
          {
            "ref": "TALK_INPUT_NUMERIC_ABANDON",
            "value": { "FR": "Abandonner", "EN": "Give up" }
          }
        ],
        "character": {
          "character": "BOB",
          "image": "default"
        }
      }
    ]
  },
  "scenario": {
    "steps": [
      {
        "ref": "ETAPE_DEBUT",
        "label": {
          "FR": "Démarrage",
          "EN": "Start"
        },
        "targets": null,
        "possibilities": [
          {
            "trigger": {
              "type": "STEPACTIVE"
            },
            "consequences": [
              {
                "type": "Talk",
                "metadata": {
                  "talkRef": "TALK_INPUT_ALPHA"
                }
              }
            ],
            "condition": null,
            "recurrence": null
          },
          {
            "trigger": {
              "type": "TalkEnd",
              "value": "TALK002"
            },
            "consequences": [
              {
                "type": "GameOver",
                "metadata": {
                  "result": "SUCCESS_ONE_CONTINUE"
                }
              }
            ],
            "condition": null,
            "recurrence": null
          },
          {
            "trigger": {
              "type": "TalkOptionSelect",
              "value": "TALK_LETS_GO_CHOIX_NON"
            },
            "consequences": [
              {
                "type": "GameOver",
                "metadata": {
                  "result": "FAILURE_ONE_CONTINUE"
                }
              }
            ],
            "condition": null,
            "recurrence": null
          },
          {
            "trigger": {
              "type": "TALKINPUTTEXT",
              "talkId": "TALK_INPUT_ALPHA",
              "value": "secret",
              "matchType": "EQUALS"
            },
            "consequences": [
              {
                "type": "Talk",
                "metadata": {
                  "talkRef": "TALK_INPUT_ALPHA_SUCCESS"
                }
              }
            ],
            "condition": null,
            "recurrence": null
          },
          {
            "trigger": {
              "type": "TALKINPUTTEXT",
              "talkId": "TALK_INPUT_ALPHA",
              "value": "secret",
              "matchType": "DIFFERENT"
            },
            "consequences": [
              {
                "type": "Talk",
                "metadata": {
                  "talkRef": "TALK_INPUT_ALPHA_FAIL"
                }
              }
            ],
            "condition": null,
            "recurrence": null
          },
          {
            "trigger": {
              "type": "TALKINPUTTEXT",
              "talkId": "TALK_INPUT_NUMERIC",
              "value": "1234",
              "matchType": "EQUALS"
            },
            "consequences": [
              {
                "type": "Talk",
                "metadata": {
                  "talkRef": "TALK_INPUT_NUMERIC_SUCCESS"
                }
              }
            ],
            "condition": null,
            "recurrence": null
          },
          {
            "trigger": {
              "type": "TALKINPUTTEXT",
              "talkId": "TALK_INPUT_NUMERIC",
              "value": "1234",
              "matchType": "DIFFERENT"
            },
            "consequences": [
              {
                "type": "Talk",
                "metadata": {
                  "talkRef": "TALK_INPUT_NUMERIC_FAIL"
                }
              }
            ],
            "condition": null,
            "recurrence": null
          }
        ]
      }
    ]
  }
}
